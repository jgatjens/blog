/**
 * Tweetie: A simple Twitter feed plugin
 * Author: Sonny T. <hi@sonnyt.com>, sonnyt.com
 */(function(e){e.fn.twittie=function(t){var n=e.extend({username:null,count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}"},t);n.username||e.error("Username is not defined.");var r=function(e){var t=e.split(" "),n="";for(var r=0,i=t.length;r<i;r++){var s=t[r],o="https://twitter.com/#!/";s.indexOf("#")!==-1&&(s='<a href="'+o+"search/"+s.replace("#","%23").replace(/[^A-Za-z0-9]/,"")+'" target="_blank">'+s+"</a>");s.indexOf("@")!==-1&&(s='<a href="'+o+s.replace("@","").replace(/[^A-Za-z0-9]/,"")+'" target="_blank">'+s+"</a>");s.indexOf("http://")!==-1&&(s='<a href="'+s+'" target="_blank">'+s+"</a>");n+=s+" "}return n},i=function(e){e=new Date(e);var t=["January","February","March","April","May","June","July","August","September","October","November","December"],r={"%d":e.getDate(),"%m":e.getMonth(),"%b":t[e.getMonth()].substr(0,3),"%B":t[e.getMonth()],"%y":String(e.getFullYear()).slice(-2),"%Y":e.getFullYear()},i=n.dateFormat,s=n.dateFormat.match(/%[dmbByY]/g);for(var o=0,u=s.length;o<u;o++)i=i.replace(s[o],r[s[o]]);return i},s=function(e){var t=n.template,r=["date","tweet"];for(var i=0,s=r.length;i<s;i++)t=t.replace(new RegExp("{{"+r[i]+"}}","gi"),e[r[i]]);return t};this.html("<span>Loading...</span>");var o="https://api.twitter.com/1/statuses/user_timeline.json?callback=?",u=this;e.getJSON(o,{screen_name:n.username},function(e){u.find("span").fadeOut("fast",function(){u.html("<ul></ul>");n.hideReplies&&(e=e.filter(function(e){return e.in_reply_to_screen_name===null}));for(var t=0;t<n.count;t++){if(!e[t])break;var o={date:i(e[t].created_at),tweet:r(e[t].text)};u.find("ul").append("<li>"+s(o)+"</li>")}})})}})(jQuery);